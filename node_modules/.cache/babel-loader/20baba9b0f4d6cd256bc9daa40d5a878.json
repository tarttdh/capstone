{"ast":null,"code":"import _classCallCheck from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import ListGroup from'react-bootstrap/ListGroup';import Image from\"./components/Image.jpg\";import\"./components/test-card.css\";import ArticleDetails from'./ArticleDetails';import Pagination from'./Pagination';import{serverUrl}from\"./config.js\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AllCategories=/*#__PURE__*/function(_Component){_inherits(AllCategories,_Component);var _super=_createSuper(AllCategories);function AllCategories(props){var _this;_classCallCheck(this,AllCategories);_this=_super.call(this,props);_this.state={error:null,isLoaded:false,articles:[],openArticle:-1,selectArticle:-1,currentPage:1};return _this;}_createClass(AllCategories,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"\".concat(serverUrl,\"/articles/?format=json\")).then(function(res){return res.json();}).then(function(result){// Sort the articles by date in descending order\nresult.sort(function(a,b){return new Date(b.Date)-new Date(a.Date);});_this2.setState({isLoaded:true,articles:result});},function(error){_this2.setState({isLoaded:true,error:error});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,error=_this$state.error,isLoaded=_this$state.isLoaded,articles=_this$state.articles,selectArticle=_this$state.selectArticle,openArticle=_this$state.openArticle,currentPage=_this$state.currentPage,selectButton=_this$state.selectButton;var articlesPerPage=12;// number of articles to display per page\nvar truncate=function truncate(input){return(input===null||input===void 0?void 0:input.length)>300?\"\".concat(input.substring(0,254),\"...\"):input;};var openFullArticle=function openFullArticle(id){return _this3.setState({openArticle:id});};var selectedArticle=function selectedArticle(id){return _this3.setState({selectArticle:id});};var selectedButton=function selectedButton(id){return _this3.setState({selectButton:id});};var indexOfLastArticle=currentPage*articlesPerPage;var indexOfFirstArticle=indexOfLastArticle-articlesPerPage;var currentArticles=articles.slice(indexOfFirstArticle,indexOfLastArticle);var handlePageChange=function handlePageChange(pageNumber){_this3.setState({currentPage:pageNumber});};if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card-column mt-3 test-cards\",children:currentArticles.map(function(article){return/*#__PURE__*/_jsxs(Card,{className:\"cards test-card\",style:{width:\"20rem\",minheight:\"25px\"},children:[/*#__PURE__*/_jsx(Card.Img,{style:{height:\"200px\"},variant:\"top\",src:article.Image?article.Image:Image,className:\"img-fluid\",alt:\"Responsive image\",onClick:function onClick(){selectedArticle(article._id);}}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{onClick:function onClick(){selectedArticle(article._id);},children:article.Title}),/*#__PURE__*/_jsx(Card.Text,{style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){openFullArticle(article._id);},children:openArticle!==article._id?truncate(article.Summary):article.Summary})})]}),/*#__PURE__*/_jsxs(ListGroup,{className:\"list-group-flush\",onClick:function onClick(){selectedArticle(article._id);},children:[selectArticle!==article._id?'':/*#__PURE__*/_jsx(ArticleDetails,{article:article,className:\"popupModal\"}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Written by:  \",article.Author||'none']}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Read Time: \",article.Read_Time,\" min\"]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Date: \",article.Date?article.Date:'NA']}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsxs(Button,{variant:\"primary\",style:{backgroundColor:\"darkgreen\",border:\"darkgreen 1px solid\"},onClick:function onClick(){selectedButton(article._id);},children:[\"Read More\",selectButton!==article._id?'':/*#__PURE__*/_jsx(ArticleDetails,{article:article,className:\"popupModal\"})]})})})]})]},article.index);})})})}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,setCurrentPage:handlePageChange,totalArticles:articles.length,articlesPerPage:articlesPerPage})]});}}}]);return AllCategories;}(Component);export default AllCategories;","map":{"version":3,"sources":["/mnt/c/capstone/connect/src/AllCategories.js"],"names":["React","Component","Card","Button","Container","Row","ListGroup","Image","ArticleDetails","Pagination","serverUrl","AllCategories","props","state","error","isLoaded","articles","openArticle","selectArticle","currentPage","fetch","then","res","json","result","sort","a","b","Date","setState","selectButton","articlesPerPage","truncate","input","length","substring","openFullArticle","id","selectedArticle","selectedButton","indexOfLastArticle","indexOfFirstArticle","currentArticles","slice","handlePageChange","pageNumber","message","map","article","width","minheight","height","_id","Title","cursor","Summary","Author","Read_Time","textAlign","backgroundColor","border","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Image from \"./components/Image.jpg\";\r\nimport \"./components/test-card.css\";\r\nimport ArticleDetails from './ArticleDetails';\r\nimport Pagination from './Pagination';\r\nimport { serverUrl } from \"./config.js\";\r\n\r\nexport class AllCategories extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      articles: [],\r\n      openArticle: -1,\r\n      selectArticle: -1,\r\n      currentPage: 1\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${serverUrl}/articles/?format=json`)\r\n      .then((res) => res.json())\r\n      .then(\r\n        (result) => {\r\n          // Sort the articles by date in descending order\r\n          result.sort((a, b) => new Date(b.Date) - new Date(a.Date));\r\n          this.setState({\r\n            isLoaded: true,\r\n            articles: result, \r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({\r\n            isLoaded: true,\r\n            error,\r\n          });\r\n        }\r\n      );\r\n  }\r\n\r\n  render() {\r\n    const { error, isLoaded, articles, selectArticle, openArticle, currentPage, selectButton } = this.state;\r\n    const articlesPerPage = 12; // number of articles to display per page\r\n\r\n    const truncate = (input) =>\r\n      input?.length > 300 ? `${input.substring(0, 254)}...` : input;\r\n\r\n    const openFullArticle = (id) =>\r\n      this.setState({\r\n        openArticle: id\r\n      });\r\n\r\n    const selectedArticle = (id) =>\r\n      this.setState({\r\n        selectArticle: id\r\n      });\r\n\r\n      const selectedButton = (id) =>\r\n      this.setState({\r\n        selectButton: id\r\n      });\r\n\r\n    const indexOfLastArticle = currentPage * articlesPerPage;\r\n    const indexOfFirstArticle = indexOfLastArticle - articlesPerPage;\r\n    const currentArticles = articles.slice(indexOfFirstArticle, indexOfLastArticle);\r\n\r\n    const handlePageChange = (pageNumber) => {\r\n      this.setState({\r\n        currentPage: pageNumber\r\n      });\r\n    };\r\n\r\n    if (error) {\r\n      return <div>Error: {error.message}</div>;\r\n    } else if (!isLoaded) {\r\n      return <div>Loading...</div>;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Container>\r\n            <Row>\r\n              <div className=\"card-column mt-3 test-cards\">\r\n                {currentArticles.map((article) => (\r\n                  <Card\r\n                    className=\"cards test-card\"\r\n                    style={{\r\n                      width: \"20rem\",\r\n                      minheight: \"25px\"\r\n                    }}\r\n                    key={article.index}\r\n                  >\r\n                    { <Card.Img style ={{height: \"200px\"}} variant=\"top\" src={article.Image ? article.Image : Image} className=\"img-fluid\" alt=\"Responsive image\" \r\n                    onClick={() =>{selectedArticle(article._id)} }/> }\r\n                    <Card.Body>\r\n                      <Card.Title \r\n                    onClick={() =>{selectedArticle(article._id)} }>\r\n                      {article.Title}\r\n                      </Card.Title>\r\n                      <Card.Text\r\n                        style={{\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      >\r\n                        <p onClick={() => {openFullArticle(article._id)} }>\r\n                          {openArticle !== article._id? truncate(article.Summary): article.Summary}\r\n                        </p>\r\n                      </Card.Text>\r\n                    </Card.Body >\r\n                    <ListGroup className=\"list-group-flush\" \r\n                     onClick={() =>{selectedArticle(article._id)} }>\r\n                     {selectArticle !== article._id? '':\r\n                       <ArticleDetails article={article} className=\"popupModal\"/>\r\n                     }\r\n                      <ListGroup.Item>Written by:  {article.Author || 'none'}</ListGroup.Item>\r\n                      <ListGroup.Item>Read Time: {article.Read_Time} min</ListGroup.Item>\r\n                      <ListGroup.Item>Date: {article.Date ? article.Date : 'NA'}</ListGroup.Item>\r\n                      <ListGroup.Item>\r\n                      <div style={{textAlign: 'center'}}>\r\n                      <Button\r\n                        variant=\"primary\"\r\n                        style={{\r\n                          backgroundColor: \"darkgreen\",\r\n                          border: \"darkgreen 1px solid\",\r\n                        }}\r\n                        onClick={() =>{selectedButton(article._id)} }>Read More\r\n                        {selectButton !== article._id? '': \r\n                          <ArticleDetails article={article} className=\"popupModal\"/>\r\n                          \r\n                        } \r\n                      </Button> \r\n                      </div>\r\n                      </ListGroup.Item>\r\n                    </ListGroup>\r\n                    {/* <Card.Body className= \"card-actions\">\r\n                    <Button\r\n                        variant=\"primary\"\r\n                        style={{\r\n                          backgroundColor: \"darkgreen\",\r\n                          border: \"darkgreen 1px solid\",\r\n                        }}\r\n                        onClick={() =>{selectedArticle(article._id)} }>\r\n                        {selectArticle !== article._id? 'Read More':\r\n                          <ArticleDetails article={article} className=\"popupModal\"/>\r\n                        } \r\n                      </Button> \r\n                      <Card.Link to={article.URL} className= \"card-link\" href={article.URL} target= \"_blank\">Link to article</Card.Link>\r\n                      </Card.Body> */}\r\n                   </Card> \r\n                ))}\r\n              </div>\r\n            </Row>\r\n          </Container>\r\n          <Pagination\r\n            currentPage={currentPage}\r\n            setCurrentPage={handlePageChange}\r\n            totalArticles={articles.length}\r\n            articlesPerPage={articlesPerPage}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default AllCategories;\r\n"]},"metadata":{},"sourceType":"module"}