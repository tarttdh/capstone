{"ast":null,"code":"import _asyncToGenerator from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/regenerator/index.js\";import{AuthContext}from'../context/AuthContext';import React,{useState,useContext,useEffect}from\"react\";import jwt_decode from\"jwt-decode\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(){var navigate=useNavigate();var _useContext=useContext(AuthContext),user=_useContext.user,setAuthTokens=_useContext.setAuthTokens,setUser=_useContext.setUser;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var loginUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch('http://127.0.0.1:8000/api/token/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({'username':username,'password':password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);if(response.status===200){console.log(data);setAuthTokens(data);setUser(jwt_decode(data.access));localStorage.setItem('authTokens',JSON.stringify(data));navigate('/Profile');}else{alert('Something went wrong!');}case 9:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-signin\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginUser,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",placeholder:\"Username\",onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"Username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"floatingPassword\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingPassword\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",type:\"submit\",children:\"Sign In\"})]})})]});};","map":{"version":3,"sources":["/mnt/c/capstone/connect/src/components/Login.js"],"names":["AuthContext","React","useState","useContext","useEffect","jwt_decode","useNavigate","Login","navigate","user","setAuthTokens","setUser","username","setName","password","setPassword","loginUser","e","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","data","console","log","status","access","localStorage","setItem","alert","target","value"],"mappings":"0UAAA,OAAQA,WAAR,KAA0B,wBAA1B,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,CAAqCC,SAArC,KAAqD,OAArD,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,C,wFAGC,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CACxB,GAAIC,CAAAA,QAAQ,CAAGF,WAAW,EAA1B,CACA,gBAAmCH,UAAU,CAACH,WAAD,CAA7C,CAAKS,IAAL,aAAKA,IAAL,CAAWC,aAAX,aAAWA,aAAX,CAA0BC,OAA1B,aAA0BA,OAA1B,CACA,cAA4BT,QAAQ,CAAC,EAAD,CAApC,wCAAOU,QAAP,eAAiBC,OAAjB,eACA,eAAgCX,QAAQ,CAAC,EAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eAGA,GAAIC,CAAAA,SAAS,0FAAG,iBAAOC,CAAP,oIACZA,CAAC,CAACC,cAAF,GADY,sBAESC,CAAAA,KAAK,CAAC,kCAAD,CAAoC,CAC1DC,MAAM,CAAC,MADmD,CAE1DC,OAAO,CAAC,CACJ,eAAe,kBADX,CAFkD,CAK1DC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAAC,WAAWZ,QAAZ,CAAsB,WAAWE,QAAjC,CAAf,CALqD,CAApC,CAFd,QAERW,QAFQ,qCASKA,CAAAA,QAAQ,CAACC,IAAT,EATL,QASRC,IATQ,eAUZC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAGF,QAAQ,CAACK,MAAT,GAAoB,GAAvB,CAA2B,CACvBF,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAjB,aAAa,CAACiB,IAAD,CAAb,CACAhB,OAAO,CAACN,UAAU,CAACsB,IAAI,CAACI,MAAN,CAAX,CAAP,CACAC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCV,IAAI,CAACC,SAAL,CAAeG,IAAf,CAAnC,EACAnB,QAAQ,CAAC,UAAD,CAAR,CACH,CAND,IAMK,CACD0B,KAAK,CAAC,uBAAD,CAAL,CACH,CAnBW,sDAAH,kBAATlB,CAAAA,SAAS,4CAAb,CAsBA,mBACA,qCACI,YAAK,SAAS,CAAC,OAAf,qBADJ,cAEI,YAAK,SAAS,CAAC,aAAf,uBACI,cAAM,QAAQ,CAAEA,SAAhB,wBACI,aAAK,SAAS,CAAC,eAAf,wBACA,cAAO,SAAS,CAAC,cAAjB,CAAgC,WAAW,CAAC,UAA5C,CACQ,QAAQ,CAAE,kBAAAC,CAAC,QAAIJ,CAAAA,OAAO,CAACI,CAAC,CAACkB,MAAF,CAASC,KAAV,CAAX,EADnB,EADA,cAII,cAAO,OAAO,CAAC,eAAf,sBAJJ,GADJ,cAQI,aAAK,SAAS,CAAC,eAAf,wBACA,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,EAAE,CAAC,kBAAnD,CAAsE,WAAW,CAAC,UAAlF,CACQ,QAAQ,CAAE,kBAAAnB,CAAC,QAAIF,CAAAA,WAAW,CAACE,CAAC,CAACkB,MAAF,CAASC,KAAV,CAAf,EADnB,EADA,cAII,cAAO,OAAO,CAAC,kBAAf,sBAJJ,GARJ,cAeI,eAAQ,SAAS,CAAC,8BAAlB,CAAiD,IAAI,CAAC,QAAtD,qBAfJ,GADJ,EAFJ,GADA,CAwBH,CArDO","sourcesContent":["import {AuthContext} from '../context/AuthContext'\nimport React, {useState, useContext, useEffect} from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport {useNavigate} from 'react-router-dom';\n\n\n export const Login = () => {\n    let navigate = useNavigate();\n    let {user, setAuthTokens, setUser}=useContext(AuthContext);\n    const [username, setName] = useState('');\n    const [password, setPassword] = useState('');\n\n\n    let loginUser = async (e )=> {\n        e.preventDefault()\n        let response = await fetch('http://127.0.0.1:8000/api/token/',{\n            method:'POST', \n            headers:{\n                'Content-Type':'application/json'\n            },\n            body:JSON.stringify({'username':username, 'password':password})\n        })\n        let data = await response.json()\n        console.log(data)\n        if(response.status === 200){\n            console.log(data)\n            setAuthTokens(data)\n            setUser(jwt_decode(data.access))\n            localStorage.setItem('authTokens', JSON.stringify(data))\n            navigate('/Profile')\n        }else{\n            alert('Something went wrong!')\n        }\n    }\n\n    return(\n    <main>\n        <div className=\"label\">Sign In</div>\n        <div className=\"form-signin\">\n            <form onSubmit={loginUser}>\n                <div className=\"form-floating\">\n                <input className=\"form-control\" placeholder=\"Username\"\n                        onChange={e => setName(e.target.value)}\n                    />\n                    <label htmlFor=\"floatingInput\">Username</label>\n                </div>\n\n                <div className=\"form-floating\">\n                <input type=\"password\" className=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\"\n                        onChange={e => setPassword(e.target.value)}\n                    />\n                    <label htmlFor=\"floatingPassword\">Password</label>\n                </div>\n\n                <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\">Sign In</button>\n            </form>\n        </div>\n    </main>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}