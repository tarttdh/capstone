{"ast":null,"code":"import _asyncToGenerator from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{useAuth0}from'@auth0/auth0-react';import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import NoteDetails from\"../components/NoteDetails\";import{Nav}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _useAuth=useAuth0(),user=_useAuth.user,isAuthenticated=_useAuth.isAuthenticated;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),responseData=_useState2[0],setResponseData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),openNote=_useState4[0],setOpenNote=_useState4[1];var openFullNote=function openFullNote(id){setOpenNote(id);};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var myHeaders,raw,requestOptions,response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");raw=JSON.stringify({\"email\":\"\".concat(user.email)});requestOptions={method:'POST',headers:myHeaders,body:raw,redirect:'follow'};_context.prev=4;_context.next=7;return fetch(\"http://localhost:5001/user/\",requestOptions);case 7:response=_context.sent;_context.next=10;return response.json();case 10:result=_context.sent;setResponseData(result);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);console.log('error',_context.t0);setResponseData(null);case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{children:\"Please log in to see your profile information.\"});}return responseData?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Nav,{className:\"mx-auto col-6 justify-content-end\",children:/*#__PURE__*/_jsx(Nav.Link,{className:\"text-primary\",href:\"/edit_profile\",children:\"Edit Profile\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3 inset-shadow bg-secondary\"}),/*#__PURE__*/_jsxs(\"main\",{className:\"mx-auto col-6 text-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"round-img\",style:{width:\"130px\",height:\"130px\",borderRadius:\"125px\"},src:responseData.picture,alt:\"Profile Picture\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0 mt-3 prof-title\",children:responseData.name}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 mt-0\",children:responseData.email}),responseData.savedNotes?responseData.savedNotes.map(function(note){return/*#__PURE__*/_jsxs(Card,{className:\"cards test-card\",style:{width:\"20rem\",minheight:\"25px\"},children:[/*#__PURE__*/_jsx(Card.Title,{children:note.articleTitle}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",style:{backgroundColor:\"darkgreen\",border:\"darkgreen 1px solid\"},onClick:function onClick(){return openFullNote(note.id);},children:openNote!==note.id?\"open Note\":/*#__PURE__*/_jsx(NoteDetails,{note:note,className:\"popupModal\"})})]},note.id);}):\"No saved articles.\"]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});};export default Profile;","map":{"version":3,"sources":["/mnt/c/capstone/connect/src/Frontend/Pages/Profile.js"],"names":["React","useState","useEffect","useAuth0","Card","Button","NoteDetails","Nav","Profile","user","isAuthenticated","responseData","setResponseData","openNote","setOpenNote","openFullNote","id","fetchData","myHeaders","Headers","append","raw","JSON","stringify","email","requestOptions","method","headers","body","redirect","fetch","response","json","result","console","log","width","height","borderRadius","picture","name","savedNotes","map","note","minheight","articleTitle","backgroundColor","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport NoteDetails from \"../components/NoteDetails\";\r\nimport { Nav } from 'react-bootstrap';\r\n\r\n\r\nconst Profile = () => {\r\n\r\n\r\n  const { user, isAuthenticated } = useAuth0();\r\n\r\n\r\n  const [responseData, setResponseData] = useState(null);\r\n  const [openNote, setOpenNote] = useState(null);\r\n\r\n\r\n  const openFullNote = (id) => {\r\n    setOpenNote(id);\r\n  };\r\n\r\n\r\n  const fetchData = async () => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n\r\n    var raw = JSON.stringify({\r\n      \"email\": `${user.email}`\r\n    });\r\n\r\n\r\n    var requestOptions = {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: raw,\r\n      redirect: 'follow'\r\n    };\r\n\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:5001/user/\", requestOptions);\r\n      const result = await response.json();\r\n      setResponseData(result);\r\n    } catch (error) {\r\n      console.log('error', error);\r\n      setResponseData(null);\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n\r\n  if (!isAuthenticated) {\r\n    return <div>Please log in to see your profile information.</div>;\r\n  }\r\n\r\n\r\n  return responseData ? (\r\n    <div>\r\n      <header className=\"text-center\">\r\n        <Nav className=\"mx-auto col-6 justify-content-end\">\r\n          <Nav.Link className=\"text-primary\" href=\"/edit_profile\">Edit Profile</Nav.Link>\r\n        </Nav>\r\n      </header>\r\n      <div className=\"col-3 inset-shadow bg-secondary\"></div>\r\n      <main className=\"mx-auto col-6 text-center\">\r\n        <img className=\"round-img\" style={{width: \"130px\", height: \"130px\", borderRadius: \"125px\"}} src={responseData.picture} alt=\"Profile Picture\" />\r\n        <h4 className=\"mb-0 mt-3 prof-title\">{responseData.name}</h4>\r\n        <p className=\"mb-3 mt-0\">{responseData.email}</p>\r\n        {responseData.savedNotes\r\n          ? responseData.savedNotes.map(note => (\r\n            <Card\r\n              className=\"cards test-card\"\r\n              style={{\r\n                width: \"20rem\",\r\n                minheight: \"25px\"\r\n              }}\r\n              key={note.id}\r\n            >\r\n              <Card.Title>{note.articleTitle}</Card.Title>\r\n              <Button\r\n                variant=\"primary\"\r\n                style={{\r\n                  backgroundColor: \"darkgreen\",\r\n                  border: \"darkgreen 1px solid\",\r\n                }}\r\n                onClick={() => openFullNote(note.id)}\r\n              >\r\n                {openNote !== note.id ? \"open Note\" : <NoteDetails note={note} className=\"popupModal\" />}\r\n              </Button>\r\n            </Card>\r\n          ))\r\n          : \"No saved articles.\"}\r\n      </main>\r\n    </div>\r\n  ) : (\r\n    <div>Loading...</div>\r\n  );\r\n};\r\n\r\n\r\nexport default Profile;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}