{"ast":null,"code":"import _classCallCheck from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/mnt/c/capstone/connect/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import ListGroup from'react-bootstrap/ListGroup';import Image from\"../../components/Image.jpg\";import\"../../components/test-card.css\";import ArticleDetails from'../../components/ArticleDetails';import Pagination from'../../components/Pagination';import{serverUrl}from\"../../../config.js\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Gov=/*#__PURE__*/function(_Component){_inherits(Gov,_Component);var _super=_createSuper(Gov);function Gov(props){var _this;_classCallCheck(this,Gov);_this=_super.call(this,props);_this.state={error:null,isLoaded:false,articles:[],openArticle:-1,selectArticle:-1,currentPage:1};return _this;}_createClass(Gov,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"\".concat(serverUrl,\"/gov_articles/?format=json\")).then(function(res){return res.json();}).then(function(result){// Calculate the date two months ago\nvar currentDate=new Date();var threeMonthsAgo=new Date(currentDate.getFullYear(),currentDate.getMonth()-3,1);// Filter out articles whose date is before two months ago\nvar filteredResult=result.filter(function(article){return new Date(article.Date)>=threeMonthsAgo;});// Sort the remaining articles by date in descending order\nfilteredResult.sort(function(a,b){return new Date(b.Date)-new Date(a.Date);});_this2.setState({isLoaded:true,articles:filteredResult});},function(error){_this2.setState({isLoaded:true,error:error});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,error=_this$state.error,isLoaded=_this$state.isLoaded,articles=_this$state.articles,selectArticle=_this$state.selectArticle,openArticle=_this$state.openArticle,currentPage=_this$state.currentPage,selectButton=_this$state.selectButton;var articlesPerPage=12;// number of articles to display per page\nvar truncate=function truncate(input){return(input===null||input===void 0?void 0:input.length)>300?\"\".concat(input.substring(0,254),\"...\"):input;};var openFullArticle=function openFullArticle(id){return _this3.setState({openArticle:id});};var selectedArticle=function selectedArticle(id){return _this3.setState({selectArticle:id});};var selectedButton=function selectedButton(id){return _this3.setState({selectButton:id});};var indexOfLastArticle=currentPage*articlesPerPage;var indexOfFirstArticle=indexOfLastArticle-articlesPerPage;var currentArticles=articles.slice(indexOfFirstArticle,indexOfLastArticle);var handlePageChange=function handlePageChange(pageNumber){_this3.setState({currentPage:pageNumber});};if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card-column mt-3 test-cards\",children:currentArticles.map(function(article){return/*#__PURE__*/_jsxs(Card,{className:\"cards test-card\",style:{width:\"20rem\",minheight:\"25px\"},children:[/*#__PURE__*/_jsx(Card.Img,{style:{height:\"200px\"},variant:\"top\",src:article.Image?article.Image:Image,className:\"img-fluid\",alt:\"Responsive image\",onClick:function onClick(){selectedArticle(article._id);}}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{onClick:function onClick(){selectedArticle(article._id);},children:article.Title}),/*#__PURE__*/_jsx(Card.Text,{style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){openFullArticle(article._id);},children:openArticle!==article._id?truncate(article.Summary):article.Summary})})]}),/*#__PURE__*/_jsxs(ListGroup,{className:\"list-group-flush\",onClick:function onClick(){selectedArticle(article._id);},children:[selectArticle!==article._id?'':/*#__PURE__*/_jsx(ArticleDetails,{article:article,className:\"popupModal\"}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Written by:  \",article.Author||'none']}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Read Time: \",article.Read_Time,\" min\"]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Date: \",article.Date?article.Date:'NA']}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsxs(Button,{variant:\"primary\",style:{backgroundColor:\"darkgreen\",border:\"darkgreen 1px solid\"},onClick:function onClick(){selectedButton(article._id);},children:[\"Read More\",selectButton!==article._id?'':/*#__PURE__*/_jsx(ArticleDetails,{article:article,className:\"popupModal\"})]})})})]})]},article.index);})})})}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,setCurrentPage:handlePageChange,totalArticles:articles.length,articlesPerPage:articlesPerPage})]});}}}]);return Gov;}(Component);export default Gov;","map":{"version":3,"sources":["/mnt/c/capstone/connect/src/Frontend/Pages/recent/Gov.js"],"names":["React","Component","Card","Button","Container","Row","ListGroup","Image","ArticleDetails","Pagination","serverUrl","Gov","props","state","error","isLoaded","articles","openArticle","selectArticle","currentPage","fetch","then","res","json","result","currentDate","Date","threeMonthsAgo","getFullYear","getMonth","filteredResult","filter","article","sort","a","b","setState","selectButton","articlesPerPage","truncate","input","length","substring","openFullArticle","id","selectedArticle","selectedButton","indexOfLastArticle","indexOfFirstArticle","currentArticles","slice","handlePageChange","pageNumber","message","map","width","minheight","height","_id","Title","cursor","Summary","Author","Read_Time","textAlign","backgroundColor","border","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Image from \"../../components/Image.jpg\";\r\nimport \"../../components/test-card.css\";\r\nimport ArticleDetails from '../../components/ArticleDetails';\r\nimport Pagination from '../../components/Pagination';\r\nimport { serverUrl } from \"../../../config.js\";\r\n\r\nexport class Gov extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      articles: [],\r\n      openArticle: -1,\r\n      selectArticle: -1,\r\n      currentPage: 1\r\n    };\r\n  }\r\n\r\n  \r\n  componentDidMount() {\r\n    fetch(`${serverUrl}/gov_articles/?format=json`)\r\n      .then((res) => res.json())\r\n      .then(\r\n        (result) => {\r\n          // Calculate the date two months ago\r\n          const currentDate = new Date();\r\n          const threeMonthsAgo = new Date(currentDate.getFullYear(), currentDate.getMonth() - 3, 1);\r\n    \r\n          // Filter out articles whose date is before two months ago\r\n          const filteredResult = result.filter(article => new Date(article.Date) >= threeMonthsAgo);\r\n    \r\n          // Sort the remaining articles by date in descending order\r\n          filteredResult.sort((a, b) => new Date(b.Date) - new Date(a.Date));\r\n    \r\n          this.setState({\r\n            isLoaded: true,\r\n            articles: filteredResult, \r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({\r\n            isLoaded: true,\r\n            error,\r\n          });\r\n        }\r\n      );\r\n  }\r\n  \r\n  \r\n  render() {\r\n    const { error, isLoaded, articles, selectArticle, openArticle, currentPage, selectButton } = this.state;\r\n    const articlesPerPage = 12; // number of articles to display per page\r\n\r\n    const truncate = (input) =>\r\n      input?.length > 300 ? `${input.substring(0, 254)}...` : input;\r\n\r\n    const openFullArticle = (id) =>\r\n      this.setState({\r\n        openArticle: id\r\n      });\r\n\r\n    const selectedArticle = (id) =>\r\n      this.setState({\r\n        selectArticle: id\r\n      });\r\n\r\n      const selectedButton = (id) =>\r\n      this.setState({\r\n        selectButton: id\r\n      });\r\n\r\n    const indexOfLastArticle = currentPage * articlesPerPage;\r\n    const indexOfFirstArticle = indexOfLastArticle - articlesPerPage;\r\n    const currentArticles = articles.slice(indexOfFirstArticle, indexOfLastArticle);\r\n\r\n    const handlePageChange = (pageNumber) => {\r\n      this.setState({\r\n        currentPage: pageNumber\r\n      });\r\n    };\r\n\r\n    if (error) {\r\n      return <div>Error: {error.message}</div>;\r\n    } else if (!isLoaded) {\r\n      return <div>Loading...</div>;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Container>\r\n            <Row>\r\n              <div className=\"card-column mt-3 test-cards\">\r\n                {currentArticles.map((article) => (\r\n                  <Card\r\n                    className=\"cards test-card\"\r\n                    style={{\r\n                      width: \"20rem\",\r\n                      minheight: \"25px\"\r\n                    }}\r\n                    key={article.index}\r\n                  >\r\n                    { <Card.Img style ={{height: \"200px\"}} variant=\"top\" src={article.Image ? article.Image : Image} className=\"img-fluid\" alt=\"Responsive image\" \r\n                    onClick={() =>{selectedArticle(article._id)} }/> }\r\n                    <Card.Body>\r\n                      <Card.Title \r\n                    onClick={() =>{selectedArticle(article._id)} }>\r\n                      {article.Title}\r\n                      </Card.Title>\r\n                      <Card.Text\r\n                        style={{\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      >\r\n                        <p onClick={() => {openFullArticle(article._id)} }>\r\n                          {openArticle !== article._id? truncate(article.Summary): article.Summary}\r\n                        </p>\r\n                      </Card.Text>\r\n                    </Card.Body >\r\n                    <ListGroup className=\"list-group-flush\" \r\n                     onClick={() =>{selectedArticle(article._id)} }>\r\n                     {selectArticle !== article._id? '':\r\n                       <ArticleDetails article={article} className=\"popupModal\"/>\r\n                     }\r\n                      <ListGroup.Item>Written by:  {article.Author || 'none'}</ListGroup.Item>\r\n                      <ListGroup.Item>Read Time: {article.Read_Time} min</ListGroup.Item>\r\n                      <ListGroup.Item>Date: {article.Date ? article.Date : 'NA'}</ListGroup.Item>\r\n                      <ListGroup.Item>\r\n                      <div style={{textAlign: 'center'}}>\r\n                      <Button\r\n                        variant=\"primary\"\r\n                        style={{\r\n                          backgroundColor: \"darkgreen\",\r\n                          border: \"darkgreen 1px solid\",\r\n                        }}\r\n                        onClick={() =>{selectedButton(article._id)} }>Read More\r\n                        {selectButton !== article._id? '': \r\n                          <ArticleDetails article={article} className=\"popupModal\"/>\r\n                          \r\n                        } \r\n                      </Button> \r\n                      </div>\r\n                      </ListGroup.Item>\r\n                    </ListGroup>\r\n                    {/* <Card.Body className= \"card-actions\">\r\n                    <Button\r\n                        variant=\"primary\"\r\n                        style={{\r\n                          backgroundColor: \"darkgreen\",\r\n                          border: \"darkgreen 1px solid\",\r\n                        }}\r\n                        onClick={() =>{selectedArticle(article._id)} }>\r\n                        {selectArticle !== article._id? 'Read More':\r\n                          <ArticleDetails article={article} className=\"popupModal\"/>\r\n                        } \r\n                      </Button> \r\n                      <Card.Link to={article.URL} className= \"card-link\" href={article.URL} target= \"_blank\">Link to article</Card.Link>\r\n                      </Card.Body> */}\r\n                   </Card> \r\n                ))}\r\n              </div>\r\n            </Row>\r\n          </Container>\r\n          <Pagination\r\n            currentPage={currentPage}\r\n            setCurrentPage={handlePageChange}\r\n            totalArticles={articles.length}\r\n            articlesPerPage={articlesPerPage}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\nexport default Gov;\r\n"]},"metadata":{},"sourceType":"module"}